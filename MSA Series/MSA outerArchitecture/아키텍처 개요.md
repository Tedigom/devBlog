


![가트너_MSA_Component.png](https://images.velog.io/post-images/tedigom/b6bae160-fb10-11e9-9ef4-395edd3ef4d0/가트너MSAComponent.png)
MicroService Architecture는 크게 Inner Architecture와 Outer Architecture로 구분할 수 있습니다. 윗 그림에서 남색 부분은 Inner Architecture의 영역이고, 회색 부분은 Outer Architecture 부분입니다.

## Inner architecture


![Inner.PNG](https://images.velog.io/post-images/tedigom/052a8e50-fbdd-11e9-9256-3bbc0d52572a/Inner.PNG)

Inner architecture는 내부 서비스와 관련된 architecture입니다.
쉽게 말해, 내부의 서비스를 어떻게 잘 쪼개는지에 대한 설계입니다. 

Inner Architecture에서 고려해야할 부분은 다음과 같습니다. 
###  
* (마이크로)서비스를 어떻게 정의할 것인가?
 
 쇼핑몰에서, 주문하기 부분과, 카트에 넣기를 같은 서비스로 넣을 것인지, 다른 서비스로 분리할 것인지는 그 비즈니스나 시스템의 특성에 따라 정의되어야 합니다. 
 
 서비스를 정의하기 위해 고려해야 할 사항은 비즈니스 뿐만 아니라, 서비스간의 종속성, 배포용이성, 장애 대응, 운영 효율성 등 굉장히 많습니다.  
 ###  
 
* DB Access 구조를 어떻게 설계할 것인가?

 Microservice가 사용하는 데이터는 일반적으로 일관된 API를 통해서 접근합니다. 또한 각 마이크로 서비스에는 자체의 데이터베이스를 가질 수 있는데, 일부의 비즈니스 트랜잭션은 여러 microservices를 걸쳐 있기 때문에, 각 서비스에 연결된 데이터 베이스의 정합성을 보장해 줄 수 있는 방안이 필요합니다.
 
* (마이크로)서비스 내 api를 어떻게 설계할 것인가?
* 논리적인 컴포넌트들의 layer를 어떠한 방식으로 설계할 것인가? 등등...

###      
Inner Architecture는 비즈니스 마다, 서비스 마다, 시스템 마다 각각의 특성이 있기 때문에 딱히 정해져 있는 것이 없습니다.( 표준이 없습니다.) 따라서 이 부분은 MSA를 설계하는 데에 가장 어려운 부분이기도 합니다.
#  
## Outer architecture
맨 위의 Gartner 그림에서는 MSA의 Outer architecture을 총 6개의 영역으로 분류하고 있습니다. 

* External Gateway

* Service Mesh
* Container Management
* Backing Services
* Telemetry
* CI/CD Automation

###  
이번 글은 '아키텍쳐의 개요' 이므로, 위 6가지 요소가 어떠한 것인지 맛보기로만 간단하게 알아보도록 하겠습니다. 

#### External Gateway
External Gateway는 전체 서비스 외부로부터 들어오는 접근을 내부 구조를 드러내지 않고 처리하기 위한 요소입니다. 
사용자 인증(Consumer Identity Provider)과 권한 정책관리(policy management)를 수행합니다.